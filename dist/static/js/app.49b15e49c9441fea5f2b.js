webpackJsonp([1],{0:function(t,e){},"1EA2":function(t,e){},"4+hh":function(t,e){},AnE8:function(t,e){},"JXU/":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},a=n("VU/8")({name:"App"},r,!1,null,null,null).exports,i=n("/ocq"),u=n("qK+J"),o=n.n(u),l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("md-list",{staticClass:"the-left-menu"},[e("md-list-item",{attrs:{to:"/"}},[e("md-icon",[this._v("supervisor_account")]),this._v(" "),e("span",{staticClass:"md-list-item-text"},[this._v("Users")])],1)],1)},staticRenderFns:[]},c={name:"layouts-main",components:{theLeftMenu:n("VU/8")({name:"the-left-menu"},l,!1,null,null,null).exports}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-container"},[e("md-app",{attrs:{"md-waterfall":"","md-mode":"fixed"}},[e("md-app-toolbar",{staticClass:"md-primary"},[e("span",{staticClass:"md-title"},[this._t("title")],2)]),this._v(" "),e("md-app-drawer",{attrs:{"md-permanent":"full"}},[e("md-toolbar",{staticClass:"md-transparent",attrs:{"md-elevation":"0"}},[this._v("Navigation")]),this._v(" "),e("the-left-menu")],1),this._v(" "),e("md-app-content",[this._t("default")],2)],1)],1)},staticRenderFns:[]};var m=n("VU/8")(c,d,!1,function(t){n("1EA2")},null,null).exports,h=n("M4fF"),f={name:"page-users",components:{layoutsMain:m,infiniteLoading:o.a},data:function(){return{counterAutoLoad:0,search:"",searchPending:!1,loadPending:!0}},methods:{onSearchDebounce:function(){},onSearch:function(){var t=this;return this.searchPending=!0,this.$store.dispatch("users/changeQuery",{key:"searchTerm",value:this.search}).then(function(){t.$refs.list.scrollTop=0,t.refreshCounterAutoLoad(),t.searchPending=!1}).catch(function(){return t.searchPending=!1})},more:function(){var t=this;return this.loadPending=!0,this.$store.dispatch("users/fetchList").then(function(){return t.loadPending=!1}).catch(function(){return t.loadPending=!1})},infiniteHandler:function(t){return this.counterAutoLoad++,this.more().then(function(){return t.loaded()}).catch(function(){return t.loaded()})},moreClick:function(){var t=this;return this.more().then(function(){return t.refreshCounterAutoLoad()})},refreshCounterAutoLoad:function(){this.counterAutoLoad=0}},computed:{list:function(){return this.$store.getters["users/list"]},isFull:function(){return this.$store.getters["users/isFull"]},disabledAutoLoad:function(){return this.counterAutoLoad>=3}},mounted:function(){var t=this;this.onSearchDebounce=Object(h.debounce)(function(){return t.onSearch()},600)},destroy:function(){this.$store.dispatch("users/reset")}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layouts-main",[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("Users")]),t._v(" "),n("div",{staticClass:"page-users"},[n("div",{staticClass:"page-users__filter"},[n("md-field",[n("label",[t._v("Search")]),t._v(" "),n("md-input",{on:{input:t.onSearchDebounce},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),t.searchPending?n("span",[n("md-progress-spinner",{staticClass:"page-users__filter-progress",attrs:{"md-diameter":20,"md-stroke":3,"md-mode":"indeterminate"}})],1):t._e()],1)],1),t._v(" "),n("div",{ref:"list",staticClass:"page-users__list",class:{"is-empty":!t.list.length&&!t.loadPending}},[n("md-list",{staticClass:"md-triple-line"},t._l(t.list,function(e){return n("div",{key:e.id},[n("md-list-item",[n("md-avatar",[n("img",{attrs:{src:e.avatarUrl,alt:"People"}})]),t._v(" "),n("div",{staticClass:"md-list-item-text"},[n("span",[t._v(t._s(e.name))])])],1),t._v(" "),n("md-divider",{staticClass:"md-inset"})],1)})),t._v(" "),t.disabledAutoLoad?t._e():n("infinite-loading",{attrs:{distance:200},on:{infinite:t.infiniteHandler}},[n("span",{attrs:{slot:"spinner"},slot:"spinner"})]),t._v(" "),t.loadPending?n("div",{staticClass:"page-users__load-progress"},[n("md-progress-spinner",{attrs:{"md-diameter":30,"md-stroke":3,"md-mode":"indeterminate"}})],1):t._e(),t._v(" "),t.isFull||t.loadPending?t._e():n("md-button",{staticClass:"page-users__more md-raised md-primary",on:{click:t.moreClick}},[t._v("Load more")])],1)])])},staticRenderFns:[]};var v=n("VU/8")(f,p,!1,function(t){n("JXU/")},null,null).exports;s.default.use(i.a);var g=new i.a({routes:[{path:"/",name:"users",component:v}]}),_=n("Lgyv"),y=n.n(_),C=n("8+8L"),L=n("7KUr"),b=n.n(L),k=n("NYxO"),A={namespaced:!0,state:{query:{lastId:0,searchTerm:""},isFull:!1,list:[]},getters:{isFull:function(t){return t.isFull},list:function(t){return t.list}},actions:{reset:function(t){var e=t.commit;e("list",[],!0),e("isFull",!1),e("query",{key:"lastId",value:0}),e("query",{key:"searchTerm",value:""})},changeQuery:function(t,e){var n=t.commit,s=t.dispatch;return n("query",{key:e.key,value:e.value}),n("query",{key:"lastId",value:0}),s("fetchList",!0)},fetchUser:function(t,e){t.commit},fetchList:function(t,e){var n=t.commit,r=t.state;return s.default.http.get("/api/users",{params:r.query}).then(function(t){return t.json()}).then(function(t){n("list",{list:t.result,updateList:e}),n("isFull",t.last)})}},mutations:{isFull:function(t,e){t.isFull=e},query:function(t,e){var n=e.key,s=e.value;t.query[n]=s},list:function(t,e){var n=e.list,s=void 0===n?[]:n,r=e.updateList,a=void 0!==r&&r,i=s[s.length-1];t.list=a?s:t.list.concat(s),t.query.lastId=i&&i.id?i.id:0}}};s.default.use(k.a);var P=new k.a.Store({modules:{users:A}}),F=n("6RRk"),U=n("bOdI"),x=n.n(U),q=n("mvHQ"),E=n.n(q),$=1e6;function w(t){return{id:t.toString(),name:"User name id"+t,avatarUrl:"https://placeimg.com/40/40/people/"+t}}var S=x()({},"GET *api/users",function(t,e,n){var s=n.params.searchTerm,r=parseInt(n.params.lastId),a=[];r&&r>0?r+=1:r=0;var i={result:a=s?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=[],r=new RegExp(t,"i");s.length!==e&&n<$;){var a=w(n);a.name.search(r)>-1&&s.push(a),n++}return s}(s,20,r):function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],s=e+t,r=e;r<s;r++)n.push(w(r));return n}(20,r),last:a.length<20,nextPageUrl:"",previousPageUrl:""};return{body:E()(i),status:200,statusText:"OK",headers:{},delay:1500}}),T=Object(F.assign)({},S);n("4+hh"),n("AnE8");s.default.use(y.a),s.default.use(C.a),s.default.use(b.a,T),s.default.config.productionTip=!1,new s.default({el:"#app",router:g,store:P,components:{App:a},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.49b15e49c9441fea5f2b.js.map